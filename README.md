# miniRpc
轻量级rpc
思路：
目前使用同步方案。后面有时间再添加异步方案。
服务端：保存key函数名-value函数，然后在接收到客户端发过来的二进制数据之后，反序列化得到函数名和请求，去调用对应的函数，然后把结果发回去。

客户端：通过zookeeper获取服务所在服务器，然后序列化函数名，请求数据发送给服务端，同步等待返回的函数调用结果.

客户端应该有一个连接池，根据服务名，直接找到对应tcp去发送rpc请求，由于tcp容易被路由设备中断，所以需要心跳设置。服务端直接使用muduo接收客户端连接

第一步：
在客户端和服务端使用相同的结构体作为请求和回复数据格式，一个简单的测试结构体即可
编写zookeeper管理类，获取服务地址
拿到地址后，编写连接池供上层使用
编写服务提供类保存rpc调用的函数。对函数进行归类，增加一层服务名，服务名下包含该服务的各函数，
编写客户端和服务端的通信协议，魔数+长度+数据的格式。
把请求和返回的功能作为远程调用函数的父类，这样就可以自动调用了

第二步：
使用protobuf替换结构体格式，对请求和回复的数据进行序列化和反序列化，
使用生成的服务类替换自己写的父类。
测试








